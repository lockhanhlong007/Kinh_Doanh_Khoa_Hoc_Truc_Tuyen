@model LessonsCatalogViewModel
@{
    var env = "https://localhost:44342";
}
@section Scripts{
    <script src="~/assets/js/custom/customLesson.js" asp-append-version="true"></script>
    <script>
        var products = new LessonJquery();
        products.initialize();
    </script>
}
<!--====== Section 1 ======-->
<div class="u-s-p-y-60">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">

                <!--====== Product Breadcrumb ======-->
                <div class="pd-breadcrumb u-s-m-b-15">
                    <ul class="pd-breadcrumb__list">
                        <li class="has-separator">
                            <a href="/">Trang Chủ</a>
                        </li>
                        <li class="has-separator">
                            <a href="/courses.html?categoryId=@Model.CourseViewModel.CategoryId">@Model.CourseViewModel.CategoryName</a>
                        </li>
                        <li class="has-separator">
                            <a href="/courses-@(Model.CourseViewModel.Id).html">@Model.CourseViewModel.Name</a>
                        </li>
                        <li class="is-marked">
                            <a href="#">@Model.LessonViewModel.Name</a>
                        </li>
                    </ul>
                </div>
                <!--====== End - Product Breadcrumb ======-->
            </div>
            <div class="col-lg-7">
                <!--====== Product Detail Zoom ======-->
                <div class="fluid-width-video-wrapper" style="width: auto; height:auto">
                    @*<iframe src="@(env + Model.LessonViewModel.VideoPath)" width="650" height="365" allowfullscreen="" name="@Model.LessonViewModel.Name"></iframe>*@
                    <video width="650" height="365" controls>
                        <source src="@(env + Model.LessonViewModel.VideoPath)" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                </div>
                <!--====== End - Product Detail Zoom ======-->
            </div>
            <div class="col-lg-5">
                <!--====== Product Detail Tab ======-->
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="pd-tag">
                                <div style="border: 1px solid #f7f7f7; padding: 0 0 0 15px; margin: 0; background-color: #f7f7f7;">
                                    <ul class="nav pd-tab__list">
                                        <li class="nav-item">
                                            <a class="nav-link active" data-toggle="tab" href="#pd-lesson">Bài Học</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="view-review" data-toggle="tab" href="#pd-rev">
                                                Bình Luận
                                                <span>(@Model.CommentViewModels.Count)</span>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                <div style="border: 1px solid #f7f7f7;background-color: #f7f7f7;">
                                    <div class="tab-content" style="max-height: 600px;overflow-y: auto;padding: 20px;margin: 0;">
                                        <!--====== Tab 1 ======-->
                                        <div class="tab-pane fade show active" id="pd-lesson">
                                            <div class="pd-tab__tag">
                                                <div>
                                                    <h4 class="content_courses">Nội Dung Khóa Học</h4>
                                                    <ul class="lesson-list">
                                                        @foreach (var modelLessonViewModel in Model.LessonViewModels)
                                                        {
                                                            if (modelLessonViewModel.Id == Model.LessonViewModel.Id)
                                                            {
                                                                <li class="lesson-list--active">
                                                                    <div>
                                                                        <a href="/lessons-with-courses-@(modelLessonViewModel.CourseId).html?id=@(Model.LessonViewModel.CourseId)&lessonId=@(modelLessonViewModel.Id)" style="display: grid;margin-right: 25px">
                                                                            @modelLessonViewModel.Name
                                                                            <span style="font-size: 12px; font-weight: 400; text-align: justify; display: inline">
                                                                                <i class="far fa-clock"></i>
                                                                                @modelLessonViewModel.Times
                                                                            </span>
                                                                        </a>
                                                                        <a href="@(env + modelLessonViewModel.Attachment)">
                                                                            <i class="fas fa-download"></i>
                                                                        </a>
                                                                    </div>
                                                                </li>
                                                            }
                                                            else
                                                            {
                                                                <li class="lesson-list">
                                                                    <div>
                                                                        <a href="/lessons-with-courses-@(modelLessonViewModel.CourseId).html?id=@(Model.LessonViewModel.CourseId)&lessonId=@(modelLessonViewModel.Id)" style="display: grid; margin-right: 25px">
                                                                            @modelLessonViewModel.Name
                                                                            <span style="font-size: 12px; font-weight: 400; text-align: justify; display: inline">
                                                                                <i class="far fa-clock"></i>
                                                                                @modelLessonViewModel.Times
                                                                            </span>
                                                                        </a>
                                                                        <a href="@(env + modelLessonViewModel.Attachment)">
                                                                            <i class="fas fa-download"></i>
                                                                        </a>
                                                                    </div>
                                                                </li>
                                                            }
                                                        }
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <!--====== End - Tab 1 ======-->
                                        <!--====== Tab 2 ======-->
                                        <div class="tab-pane" id="pd-rev">
                                            <div class="pd-tab__rev">
                                                <div class="u-s-m-b-30">
                                                    <div class="pd-tab__rev-score">
                                                        <div class="u-s-m-b-8">
                                                            <h2>@Model.CommentViewModels.Count Bình Luận</h2>
                                                        </div>
                                                        <div class="u-s-m-b-8">
                                                            <h4><a href="#">Bạn cần đăng nhập để có thể bình luận!</a></h4>
                                                        </div>

                                                        <span class="gl-text">Hãy nói cho chúng tôi biết cảm nghĩ của bạn về khóa học này!</span>
                                                    </div>
                                                </div>
                                                <div class="u-s-m-b-60">
                                                    <form class="pd-tab__rev-f2">
                                                        <div class="rev-f2__group">
                                                            <div class="u-s-m-b-10">
                                                                <textarea class="text-area text-area--primary-style" placeholder="Bình Luận" id="reviewer-text"></textarea>
                                                            </div>
                                                        </div>
                                                        <div class="u-s-m-b-15">
                                                            <button class="btn btn--e-brand-shadow" type="submit">GỬI</button>
                                                        </div>
                                                    </form>
                                                </div>
                                                <div class="u-s-m-b-30">
                                                    <form class="pd-tab__rev-f1">
                                                        <div class="rev-f1__group">
                                                            <div class="u-s-m-b-15">
                                                                <h2>@Model.CommentViewModels.Count Bình Luận</h2>
                                                            </div>
                                                            <div class="u-s-m-b-15">
                                                                <select name="sortBy" data-id="@Model.LessonViewModel.CourseId" data-lesson="@Model.LessonViewModel.Id" class="select-box select-box--primary-style" id="sort-review" asp-for="SortType" asp-items="Model.SortTypes"></select>
                                                            </div>
                                                        </div>
                                                        <div class="rev-f1__review">
                                                            @foreach (var item in Model.CommentViewModels)
                                                            {
                                                                <div class="review-o u-s-m-b-15">
                                                                    <div class="review-o__info u-s-m-b-8">

                                                                        <span class="review-o__name">@item.OwnerUser</span>

                                                                        <span class="review-o__date">@item.CreationTime</span>
                                                                    </div>
                                                                    <p class="review-o__text">@item.Content</p>
                                                                </div>
                                                            }
                                                        </div>

                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                        <!--====== End - Tab 2 ======-->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--====== End - Product Detail Tab ======-->
            </div>
        </div>
    </div>
</div>

